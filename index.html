<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>PUBG Tracker Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
      padding: 20px;
      margin: 0;
      box-sizing: border-box;
      background-color: #f5f5f5;
    }
    
    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 30px;
      text-align: center;
    }
    
    .controls {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }
    
    .dropdown-container {
      display: flex;
      gap: 20px;
      align-items: center;
      flex-wrap: wrap;
    }
    
    select {
      padding: 10px 15px;
      border: 2px solid #ddd;
      border-radius: 5px;
      font-size: 16px;
      background: white;
      cursor: pointer;
    }
    
    select:focus {
      outline: none;
      border-color: #667eea;
    }
    
    .content-section {
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      margin-bottom: 30px;
      overflow: hidden;
    }
    
    .section-header {
      background: #667eea;
      color: white;
      padding: 15px 20px;
      font-weight: bold;
      font-size: 18px;
    }
    
    .section-content {
      padding: 20px;
    }
    
    .charts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .chart-container {
      background: white;
      border: 1px solid #eee;
      border-radius: 8px;
      padding: 15px;
      position: relative;
      height: 300px;
      min-height: 300px;
      width: 100%;
    }
    
    .chart-container canvas {
      width: 100% !important;
      height: 280px !important;
      max-height: 280px;
    }
    
    .stats-summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }
    
    .stat-card {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 8px;
      border-left: 4px solid #667eea;
    }
    
    .stat-title {
      font-size: 12px;
      color: #666;
      text-transform: uppercase;
      margin-bottom: 5px;
    }
    
    .stat-value {
      font-size: 24px;
      font-weight: bold;
      color: #333;
    }
    
    .hidden {
      display: none !important;
    }
    
    canvas {
      width: 100% !important;
      height: 100% !important;
    }
    
    .weapons-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }
    
    .weapon-chart {
      height: 250px;
      background: #f8f9fa;
      border-radius: 8px;
      padding: 10px;
    }

    .player-bio {
      text-align: center;
    }

    .player-bio h2 {
      color: #667eea;
      margin-bottom: 20px;
      font-size: 28px;
    }

    .bio-content {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 10px;
      margin: 20px 0;
      border-left: 4px solid #667eea;
    }

    .bio-content p {
      font-size: 18px;
      line-height: 1.6;
      color: #555;
      margin: 0;
      font-style: italic;
    }

    .bio-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>🎮 PUBG Performance Dashboard</h1>
    <p>Track your team's performance with detailed statistics and weapon analytics</p>
  </div>
  
  <div class="controls">
    <div class="dropdown-container">
      <label><strong>Select Day:</strong></label>
      <select id="daySelect">
        <option value="">Choose a day...</option>
      </select>
      
      <label><strong>Select Match:</strong></label>
      <select id="matchSelect" disabled>
        <option value="">Choose a match...</option>
      </select>
      
      <label><strong>Player BIO:</strong></label>
      <select id="bioSelect">
        <option value="">Choose a player...</option>
        <option value="Kilma9">Kilma9</option>
        <option value="Veru_13">Veru_13</option>
        <option value="Mar-0">Mar-0</option>
        <option value="Hyottokko">Hyottokko</option>
        <option value="Baron_Frajeris">Baron_Frajeris</option>
      </select>
    </div>
  </div>
  
  <div id="dayContent" class="content-section hidden">
    <div class="section-header">Daily Summary</div>
    <div class="section-content">
      <div id="daySummary"></div>
      <div id="dayCharts"></div>
    </div>
  </div>
  
  <div id="matchContent" class="content-section hidden">
    <div class="section-header">Match Details</div>
    <div class="section-content">
      <div id="matchSummary"></div>
      <div id="matchCharts"></div>
    </div>
  </div>

  <div id="bioContent" class="content-section hidden">
    <div class="section-header">Player Biography</div>
    <div class="section-content">
      <div id="bioDetails"></div>
    </div>
  </div>

  <script>
    let matchData = [];
    let currentCharts = [];

    // Utility function to clean weapon names
    function cleanWeaponName(weapon) {
      return weapon.replace(/^(Weap |Proj )/i, '').replace(/_/g, ' ').trim();
    }

    // Utility function to destroy existing charts
    function destroyCharts() {
      currentCharts.forEach(chart => {
        if (chart && typeof chart.destroy === 'function') {
          chart.destroy();
        }
      });
      currentCharts = [];
    }

    // Load and process data
    fetch('/data.json')
      .then(res => res.json())
      .then(data => {
        matchData = data;
        populateDayDropdown();
      })
      .catch(error => {
        console.error('Error loading data:', error);
      });

    function populateDayDropdown() {
      const daySelect = document.getElementById('daySelect');
      const days = [...new Set(matchData.map(match => match.date.split('T')[0]))].sort().reverse();
      
      days.forEach(day => {
        const option = document.createElement('option');
        option.value = day;
        option.textContent = day;
        daySelect.appendChild(option);
      });
    }

    function populateMatchDropdown(selectedDay) {
      const matchSelect = document.getElementById('matchSelect');
      matchSelect.innerHTML = '<option value="">Choose a match...</option>';
      
      const dayMatches = matchData.filter(match => match.date.split('T')[0] === selectedDay);
      dayMatches.forEach((match, index) => {
        const option = document.createElement('option');
        option.value = index.toString();
        const time = new Date(match.date).toLocaleTimeString();
        option.textContent = `Match ${index + 1} (${time})`;
        matchSelect.appendChild(option);
      });
      
      matchSelect.disabled = dayMatches.length === 0;
    }

    function showDaySummary(day) {
      destroyCharts();
      const dayMatches = matchData.filter(match => match.date.split('T')[0] === day);
      
      console.log('Processing day:', day, 'with', dayMatches.length, 'matches');
      
      // Calculate daily aggregated stats
      const playerStats = {};
      dayMatches.forEach(match => {
        match.team.forEach(player => {
          if (!playerStats[player.name]) {
            playerStats[player.name] = {
              kills: 0, damage: 0, headshots: 0, assists: 0, 
              boosts: 0, heals: 0, revives: 0, matches: 0,
              weapons: {}, weaponDamage: {}
            };
          }
          const stats = playerStats[player.name];
          stats.kills += player.kills || 0;
          stats.damage += player.damage || 0;
          stats.headshots += player.headshots || 0;
          stats.assists += player.assists || 0;
          stats.boosts += player.boosts || 0;
          stats.heals += player.heals || 0;
          stats.revives += player.revives || 0;
          stats.matches++;
          
          // Aggregate weapon damage
          Object.entries(player.weaponDamage || {}).forEach(([weapon, damage]) => {
            if (weapon.includes('Player') || weapon.includes('Effect')) return;
            const cleanName = cleanWeaponName(weapon);
            if (!stats.weaponDamage[cleanName]) stats.weaponDamage[cleanName] = 0;
            stats.weaponDamage[cleanName] += damage;
          });
        });
      });

      console.log('Player stats calculated:', Object.keys(playerStats).length, 'players');

      // Display summary stats
      const summaryHtml = `
        <div class="stats-summary">
          <div class="stat-card">
            <div class="stat-title">Total Matches</div>
            <div class="stat-value">${dayMatches.length}</div>
          </div>
          <div class="stat-card">
            <div class="stat-title">Players</div>
            <div class="stat-value">${Object.keys(playerStats).length}</div>
          </div>
          <div class="stat-card">
            <div class="stat-title">Total Kills</div>
            <div class="stat-value">${Object.values(playerStats).reduce((sum, p) => sum + p.kills, 0)}</div>
          </div>
          <div class="stat-card">
            <div class="stat-title">Total Damage</div>
            <div class="stat-value">${Math.round(Object.values(playerStats).reduce((sum, p) => sum + p.damage, 0)).toLocaleString()}</div>
          </div>
        </div>
      `;
      
      document.getElementById('daySummary').innerHTML = summaryHtml;

      // Create charts
      const chartsHtml = `
        <div class="charts-grid">
          <div class="chart-container"><canvas id="dayKillsChart"></canvas></div>
          <div class="chart-container"><canvas id="dayDamageChart"></canvas></div>
          <div class="chart-container"><canvas id="dayHeadshotsChart"></canvas></div>
          <div class="chart-container"><canvas id="dayAssistsChart"></canvas></div>
        </div>
        <div id="weaponCharts" class="weapons-grid"></div>
      `;
      
      document.getElementById('dayCharts').innerHTML = chartsHtml;

      // Show the day content first
      document.getElementById('dayContent').classList.remove('hidden');

      // Use setTimeout to ensure DOM is ready before creating charts
      setTimeout(() => {
        const players = Object.keys(playerStats);
        console.log('Creating charts for players:', players);
        
        if (players.length === 0) {
          console.error('No players found for charts');
          return;
        }

        const chartOptions = {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { 
            legend: { display: false },
            title: { display: true }
          },
          scales: { 
            y: { beginAtZero: true }
          },
          animation: false // Disable animation for faster rendering
        };

        // Check if canvas elements exist before creating charts
        const killsCanvas = document.getElementById('dayKillsChart');
        const damageCanvas = document.getElementById('dayDamageChart');
        const headshotsCanvas = document.getElementById('dayHeadshotsChart');
        const assistsCanvas = document.getElementById('dayAssistsChart');

        console.log('Canvas elements found:', {
          kills: !!killsCanvas,
          damage: !!damageCanvas,
          headshots: !!headshotsCanvas,
          assists: !!assistsCanvas
        });

        if (!killsCanvas || !damageCanvas || !headshotsCanvas || !assistsCanvas) {
          console.error('Canvas elements not found');
          return;
        }

        // Performance charts
        try {
          console.log('Creating kills chart...');
          const killsChart = new Chart(killsCanvas, {
            type: 'bar',
            data: {
              labels: players,
              datasets: [{
                label: 'Kills',
                data: players.map(p => playerStats[p].kills),
                backgroundColor: '#ff6b6b',
                borderColor: '#ff5252',
                borderWidth: 1
              }]
            },
            options: { 
              ...chartOptions, 
              plugins: { 
                ...chartOptions.plugins, 
                title: { display: true, text: 'Total Kills' } 
              } 
            }
          });
          currentCharts.push(killsChart);
          console.log('Kills chart created successfully');

          console.log('Creating damage chart...');
          const damageChart = new Chart(damageCanvas, {
            type: 'bar',
            data: {
              labels: players,
              datasets: [{
                label: 'Damage',
                data: players.map(p => Math.round(playerStats[p].damage)),
                backgroundColor: '#4ecdc4',
                borderColor: '#26d0ce',
                borderWidth: 1
              }]
            },
            options: { 
              ...chartOptions, 
              plugins: { 
                ...chartOptions.plugins, 
                title: { display: true, text: 'Total Damage' } 
              } 
            }
          });
          currentCharts.push(damageChart);
          console.log('Damage chart created successfully');

          console.log('Creating headshots chart...');
          const headshotsChart = new Chart(headshotsCanvas, {
            type: 'bar',
            data: {
              labels: players,
              datasets: [{
                label: 'Headshots',
                data: players.map(p => playerStats[p].headshots),
                backgroundColor: '#45b7d1',
                borderColor: '#3742fa',
                borderWidth: 1
              }]
            },
            options: { 
              ...chartOptions, 
              plugins: { 
                ...chartOptions.plugins, 
                title: { display: true, text: 'Total Headshots' } 
              } 
            }
          });
          currentCharts.push(headshotsChart);
          console.log('Headshots chart created successfully');

          console.log('Creating assists chart...');
          const assistsChart = new Chart(assistsCanvas, {
            type: 'bar',
            data: {
              labels: players,
              datasets: [{
                label: 'Assists',
                data: players.map(p => playerStats[p].assists),
                backgroundColor: '#f7b731',
                borderColor: '#fa8231',
                borderWidth: 1
              }]
            },
            options: { 
              ...chartOptions, 
              plugins: { 
                ...chartOptions.plugins, 
                title: { display: true, text: 'Total Assists' } 
              } 
            }
          });
          currentCharts.push(assistsChart);
          console.log('Assists chart created successfully');

          console.log('All main charts created successfully. Total charts:', currentCharts.length);
        } catch (error) {
          console.error('Error creating main charts:', error);
        }

        // Weapon charts for each player
        const weaponChartsContainer = document.getElementById('weaponCharts');
        if (weaponChartsContainer) {
          weaponChartsContainer.innerHTML = '';
          
          players.forEach(player => {
            const weapons = Object.entries(playerStats[player].weaponDamage)
              .filter(([weapon, damage]) => damage > 0)
              .sort((a, b) => b[1] - a[1])
              .slice(0, 10); // Top 10 weapons
            
            if (weapons.length > 0) {
              const chartDiv = document.createElement('div');
              chartDiv.className = 'weapon-chart';
              const cleanPlayerId = player.replace(/[^a-zA-Z0-9]/g, '_');
              chartDiv.innerHTML = `<canvas id="weapon-${cleanPlayerId}"></canvas>`;
              weaponChartsContainer.appendChild(chartDiv);
              
              console.log(`Creating weapon chart for ${player} with ${weapons.length} weapons`);
              
              // Use another setTimeout for weapon charts
              setTimeout(() => {
                const weaponCanvas = document.getElementById(`weapon-${cleanPlayerId}`);
                if (weaponCanvas) {
                  try {
                    const weaponChart = new Chart(weaponCanvas, {
                      type: 'doughnut',
                      data: {
                        labels: weapons.map(([weapon]) => weapon),
                        datasets: [{
                          data: weapons.map(([_, damage]) => Math.round(damage)),
                          backgroundColor: [
                            '#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57',
                            '#ff9ff3', '#54a0ff', '#5f27cd', '#00d2d3', '#ff9f43'
                          ]
                        }]
                      },
                      options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        animation: false,
                        plugins: {
                          title: { display: true, text: `${player} - Weapon Damage` },
                          legend: { position: 'bottom', labels: { boxWidth: 12, fontSize: 10 } }
                        }
                      }
                    });
                    currentCharts.push(weaponChart);
                    console.log(`Weapon chart created for ${player}`);
                  } catch (error) {
                    console.error(`Error creating weapon chart for ${player}:`, error);
                  }
                } else {
                  console.error(`Weapon canvas not found for ${player}`);
                }
              }, 200);
            }
          });
        }

        // Final check and debug info
        setTimeout(() => {
          console.log('Final chart count:', currentCharts.length);
          console.log('Chart containers visible:', {
            dayContent: !document.getElementById('dayContent').classList.contains('hidden'),
            chartsGrid: !!document.querySelector('.charts-grid'),
            chartContainers: document.querySelectorAll('.chart-container').length
          });
        }, 500);
      }, 250); // Increased timeout to give more time for DOM rendering
    }

    function showMatchDetails(dayMatches, matchIndex) {
      destroyCharts(); // Only destroy charts, keep day summary visible
      const match = dayMatches[matchIndex];
      
      console.log('Showing match details for match', matchIndex);
      
      // Match summary
      const summaryHtml = `
        <div class="stats-summary">
          <div class="stat-card">
            <div class="stat-title">Match Time</div>
            <div class="stat-value">${new Date(match.date).toLocaleString()}</div>
          </div>
          <div class="stat-card">
            <div class="stat-title">Team Size</div>
            <div class="stat-value">${match.team.length}</div>
          </div>
          <div class="stat-card">
            <div class="stat-title">Team Kills</div>
            <div class="stat-value">${match.team.reduce((sum, p) => sum + (p.kills || 0), 0)}</div>
          </div>
          <div class="stat-card">
            <div class="stat-title">Team Damage</div>
            <div class="stat-value">${Math.round(match.team.reduce((sum, p) => sum + (p.damage || 0), 0)).toLocaleString()}</div>
          </div>
        </div>
      `;
      
      document.getElementById('matchSummary').innerHTML = summaryHtml;

      // Match charts
      const chartsHtml = `
        <div class="charts-grid">
          <div class="chart-container"><canvas id="matchKillsChart"></canvas></div>
          <div class="chart-container"><canvas id="matchDamageChart"></canvas></div>
          <div class="chart-container"><canvas id="matchHeadshotsChart"></canvas></div>
          <div class="chart-container"><canvas id="matchHealsChart"></canvas></div>
        </div>
        <div id="matchWeaponCharts" class="weapons-grid"></div>
      `;
      
      document.getElementById('matchCharts').innerHTML = chartsHtml;

      // Show match content
      document.getElementById('matchContent').classList.remove('hidden');

      // Create match charts with delay
      setTimeout(() => {
        const players = match.team.map(p => p.name);
        console.log('Creating match charts for players:', players);
        
        const chartOptions = {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { 
            legend: { display: false },
            title: { display: true }
          },
          scales: { 
            y: { beginAtZero: true }
          },
          animation: false
        };

        // Check canvas elements
        const killsCanvas = document.getElementById('matchKillsChart');
        const damageCanvas = document.getElementById('matchDamageChart');
        const headshotsCanvas = document.getElementById('matchHeadshotsChart');
        const healsCanvas = document.getElementById('matchHealsChart');

        console.log('Match canvas elements found:', {
          kills: !!killsCanvas,
          damage: !!damageCanvas,
          headshots: !!headshotsCanvas,
          heals: !!healsCanvas
        });

        if (!killsCanvas || !damageCanvas || !headshotsCanvas || !healsCanvas) {
          console.error('Match canvas elements not found');
          return;
        }

        try {
          // Performance charts
          const killsChart = new Chart(killsCanvas, {
            type: 'bar',
            data: {
              labels: players,
              datasets: [{
                data: match.team.map(p => p.kills || 0),
                backgroundColor: '#ff6b6b',
                borderColor: '#ff5252',
                borderWidth: 1
              }]
            },
            options: { ...chartOptions, plugins: { ...chartOptions.plugins, title: { display: true, text: 'Kills' } } }
          });
          currentCharts.push(killsChart);

          const damageChart = new Chart(damageCanvas, {
            type: 'bar',
            data: {
              labels: players,
              datasets: [{
                data: match.team.map(p => Math.round(p.damage || 0)),
                backgroundColor: '#4ecdc4',
                borderColor: '#26d0ce',
                borderWidth: 1
              }]
            },
            options: { ...chartOptions, plugins: { ...chartOptions.plugins, title: { display: true, text: 'Damage' } } }
          });
          currentCharts.push(damageChart);

          const headshotsChart = new Chart(headshotsCanvas, {
            type: 'bar',
            data: {
              labels: players,
              datasets: [{
                data: match.team.map(p => p.headshots || 0),
                backgroundColor: '#45b7d1',
                borderColor: '#3742fa',
                borderWidth: 1
              }]
            },
            options: { ...chartOptions, plugins: { ...chartOptions.plugins, title: { display: true, text: 'Headshots' } } }
          });
          currentCharts.push(headshotsChart);

          const healsChart = new Chart(healsCanvas, {
            type: 'bar',
            data: {
              labels: players,
              datasets: [{
                data: match.team.map(p => (p.heals || 0) + (p.boosts || 0)),
                backgroundColor: '#26de81',
                borderColor: '#20bf6b',
                borderWidth: 1
              }]
            },
            options: { ...chartOptions, plugins: { ...chartOptions.plugins, title: { display: true, text: 'Heals + Boosts' } } }
          });
          currentCharts.push(healsChart);

          console.log('Match charts created successfully');
        } catch (error) {
          console.error('Error creating match charts:', error);
        }

        // Individual weapon charts for each player
        const weaponChartsContainer = document.getElementById('matchWeaponCharts');
        if (weaponChartsContainer) {
          weaponChartsContainer.innerHTML = '';
          
          match.team.forEach(player => {
            const weapons = Object.entries(player.weaponDamage || {})
              .filter(([weapon, damage]) => damage > 0 && !weapon.includes('Player') && !weapon.includes('Effect'))
              .map(([weapon, damage]) => [cleanWeaponName(weapon), damage])
              .sort((a, b) => b[1] - a[1]);
            
            if (weapons.length > 0) {
              const chartDiv = document.createElement('div');
              chartDiv.className = 'weapon-chart';
              const cleanPlayerId = player.name.replace(/[^a-zA-Z0-9]/g, '_');
              chartDiv.innerHTML = `<canvas id="match-weapon-${cleanPlayerId}"></canvas>`;
              weaponChartsContainer.appendChild(chartDiv);
              
              setTimeout(() => {
                const weaponCanvas = document.getElementById(`match-weapon-${cleanPlayerId}`);
                if (weaponCanvas) {
                  try {
                    const weaponChart = new Chart(weaponCanvas, {
                      type: 'doughnut',
                      data: {
                        labels: weapons.map(([weapon]) => weapon),
                        datasets: [{
                          data: weapons.map(([_, damage]) => Math.round(damage)),
                          backgroundColor: [
                            '#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57',
                            '#ff9ff3', '#54a0ff', '#5f27cd', '#00d2d3', '#ff9f43'
                          ]
                        }]
                      },
                      options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        animation: false,
                        plugins: {
                          title: { display: true, text: `${player.name} - Weapon Damage` },
                          legend: { position: 'bottom', labels: { boxWidth: 12, fontSize: 10 } }
                        }
                      }
                    });
                    currentCharts.push(weaponChart);
                  } catch (error) {
                    console.error(`Error creating match weapon chart for ${player.name}:`, error);
                  }
                }
              }, 200);
            }
          });
        }
      }, 250);
    }

    // Event listeners
    document.getElementById('daySelect').addEventListener('change', function() {
      const selectedDay = this.value;
      
      console.log('Day selected:', selectedDay);
      
      if (selectedDay) {
        populateMatchDropdown(selectedDay);
        showDaySummary(selectedDay);
        // Don't hide matchContent, just reset the match dropdown
        document.getElementById('matchSelect').value = '';
        document.getElementById('matchContent').classList.add('hidden');
      } else {
        document.getElementById('matchSelect').disabled = true;
        document.getElementById('matchSelect').value = '';
        document.getElementById('dayContent').classList.add('hidden');
        document.getElementById('matchContent').classList.add('hidden');
        destroyCharts();
      }
    });

    document.getElementById('matchSelect').addEventListener('change', function() {
      const selectedDay = document.getElementById('daySelect').value;
      const matchIndex = parseInt(this.value);
      
      console.log('Match selected:', matchIndex, 'for day:', selectedDay);
      
      if (!isNaN(matchIndex) && selectedDay) {
        const dayMatches = matchData.filter(match => match.date.split('T')[0] === selectedDay);
        showMatchDetails(dayMatches, matchIndex);
        // Keep dayContent visible - don't hide it
      } else {
        document.getElementById('matchContent').classList.add('hidden');
        // Re-destroy only match charts, keep day charts
        const matchCharts = currentCharts.filter(chart => 
          chart.canvas && chart.canvas.id && chart.canvas.id.includes('match')
        );
        matchCharts.forEach(chart => {
          if (chart && typeof chart.destroy === 'function') {
            chart.destroy();
          }
        });
        currentCharts = currentCharts.filter(chart => 
          !(chart.canvas && chart.canvas.id && chart.canvas.id.includes('match'))
        );
      }
    });

    // BIO dropdown event listener
    document.getElementById('bioSelect').addEventListener('change', function() {
      const selectedPlayer = this.value;
      
      console.log('Player BIO selected:', selectedPlayer);
      
      if (selectedPlayer) {
        showPlayerBio(selectedPlayer);
      } else {
        document.getElementById('bioContent').classList.add('hidden');
      }
    });

    // Function to show player bio
    function showPlayerBio(playerName) {
      const bioData = {
        'Kilma9': {
          description: 'Somehow crashes every vehicle! 🚗💥 Maybe stick to ARs instead of SMGs and try DMRs over SRs - your teammates\' ears will thank you!',
          favoriteGun: 'Gliders',
          funnyNote: 'Driving instructor\'s worst nightmare'
        },
        'Veru_13': {
          description: 'The queen of all range engagements who dominates every distance! 👑🎯 AUG for close spraying, Mini14 for long-range sniping - true master of battlefield versatility!',
          favoriteGun: 'AUG & Mini14',
          funnyNote: 'Range? What range?'
        },
        'Mar-0': {
          description: 'The landing strategist who always picks the "perfect" spot... right between 5 enemy teams! 🪂💀 At least he has an AUG to fight his way out!',
          favoriteGun: 'AUG',
          funnyNote: 'Hot zone magnet'
        },
        'Hyottokko': {
          description: 'Son of ancient Greek gods with divine bloodline... too bad he forgot to bring those powers into PUBG! ⚡️🏛️ The gods are still waiting for him to awaken!',
          favoriteGun: 'Kar98k',
          funnyNote: 'Dormant deity'
        },
        'Baron_Frajeris': {
          description: 'The legendary hoarder who carries zero ammo and no heals, but somehow has 200 mortar shells! 💣🎒 "Need ammo?" - "Sorry, only explosives!"',
          favoriteGun: 'Mortars',
          funnyNote: 'Explosive logistics expert'
        }
      };

      const player = bioData[playerName] || {
        description: 'Mysterious player with classified intel.',
        favoriteGun: 'Pan',
        funnyNote: 'Identity unknown'
      };

      const bioHtml = `
        <div class="player-bio">
          <h2>🎮 ${playerName}</h2>
          <div class="bio-content">
            <p>${player.description}</p>
          </div>
          <div class="bio-stats">
            <div class="stat-card">
              <div class="stat-title">Favorite Gun</div>
              <div class="stat-value">🔫 ${player.favoriteGun}</div>
            </div>
            <div class="stat-card">
              <div class="stat-title">Status</div>
              <div class="stat-value">Active Player</div>
            </div>
            <div class="stat-card">
              <div class="stat-title">Specialty</div>
              <div class="stat-value">${player.funnyNote}</div>
            </div>
          </div>
        </div>
      `;

      document.getElementById('bioDetails').innerHTML = bioHtml;
      document.getElementById('bioContent').classList.remove('hidden');
    }
  </script>
</body>
</html>